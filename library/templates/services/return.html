{% extends 'base.html' %}
{% block title %}대여 기록{% endblock %}

{% block content %}
<div class="grid grid-cols-4 mx-10 gap-x-4 gap-y-8">    
    {% for book in books %}
    <form 
        action="{{ url_for('book.return_book', book_id=book.book_id) }}"
        class="mx-auto p-4 text-center flex flex-col justify-center items-center h-96 w-56 bg-white border border-2 border-blue-400"
        method="POST">
        <img class="m-auto" src="../static/book_img/{{book.book_id}}.jpg" width="110" height="110">
        <a class="h-12" href="{{ url_for('book.book_detail', book_id=book.book_id) }}"><span>{{book.book.book_name}}</span></a>
        <div class="flex mt-4">
            {% if avg_rating(book.id) == 0 -%}
            <div class="text-blue-300">&#9733;</div><div class="text-blue-300">&#9733;</div><div class="text-blue-300">&#9733;</div><div class="text-blue-300">&#9733;</div><div class="text-blue-300">&#9733;</div>
            {%- elif avg_rating(book.id) == 1 -%}
            <div class="text-blue-700">&#9733;</div><div class="text-blue-300">&#9733;</div><div class="text-blue-300">&#9733;</div><div class="text-blue-300">&#9733;</div><div class="text-blue-300">&#9733;</div>
            {%- elif avg_rating(book.id) ==2 -%}
            <div class="text-blue-700">&#9733;</div><div class="text-blue-700">&#9733;</div><div class="text-blue-300">&#9733;</div><div class="text-blue-300">&#9733;</div><div class="text-blue-300">&#9733;</div>
            {%- elif avg_rating(book.id) ==3 -%}
            <div class="text-blue-700">&#9733;</div><div class="text-blue-700">&#9733;</div><div class="text-blue-700">&#9733;</div><div class="text-blue-300">&#9733;</div><div class="text-blue-300">&#9733;</div>
            {%- elif avg_rating(book.id) ==4 -%}
            <div class="text-blue-700">&#9733;</div><div class="text-blue-700">&#9733;</div><div class="text-blue-700">&#9733;</div><div class="text-blue-700">&#9733;</div><div class="text-blue-300">&#9733;</div>
            {%- else -%}
            <div class="text-blue-700">&#9733;</div><div class="text-blue-700">&#9733;</div><div class="text-blue-700">&#9733;</div><div class="text-blue-700">&#9733;</div><div class="text-blue-700">&#9733;</div>
            {%- endif %}
        </div>
        <span>{{book.rental_date}}</span>
        <button class="w-1/2 flex items-center justify-center rounded-md bg-blue-600 text-white" type="submit">반납하기</button>
    </form>
    {% endfor %}
    {% if not books %}
    <h1>반납하실 책이 없습니다. 읽을만한 책을 찾아보세요!</h1>
    {% endif %}
</div>
{% endblock %}
